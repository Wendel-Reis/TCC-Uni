<ion-content appScrollTheme>
  <div *ngIf="carga" class="surface-card p-4 shadow-2 border-round">
    <div class="font-medium text-3xl text-900 mb-3">Detalhamento</div>
    <div class="text-primary mb-5">{{ carga.status }}</div>
    <ul class="list-none p-0 m-0 border-top-1 surface-border">
      <li class="flex align-items-center py-3 px-2 flex-wrap ">
        <div class="text-500 w-full md:w-2 font-medium">Carga</div>
        <div class="text-900 w-full md:w-10">{{ carga.nome_carga }} - {{ carga.job_id }}</div>
      </li>
      <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">
        <div class="text-500 w-full md:w-2 font-medium">Descrição</div>
        <div class="text-900 w-full md:w-10 line-height-3">{{ carga.descricao_carga }}</div>
      </li>
      <li class="flex align-items-center py-3 px-2 flex-wrap ">
        <div class="text-500 w-full md:w-2 font-medium">Job</div>
        <div class="text-900 w-full md:w-10">{{ carga.nome_job }}</div>
      </li>
      <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">
        <div class="text-500 w-full md:w-2 font-medium">Erro</div>
        <div class="text-900 w-full md:w-10">{{ carga.error_descricao || 'Não houveram erros técnicos' }}</div>
      </li>
      <li class="flex align-items-center py-3 px-2 flex-wrap ">
        <div class="text-500 w-full md:w-2 font-medium">Tabelas afetadas</div>
        <div class="text-900 w-full md:w-10">
          <p-tag *ngFor="let t of tabelasAfetadas" styleClass="mr-2" [value]="t" [rounded]="true"></p-tag>
        </div>
      </li>
      <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">
        <div class="text-500 w-full md:w-2 font-medium">Detalhe da carga</div>
        <div class="text-900 w-full md:w-10">
          <div *ngIf="produtosCarregado && produtosCarregado.length >= 1" class="grid mt-0 mr-0">
            <div *ngFor="let p of produtosCarregado" class="col-12 md:col-6">
              <div class="p-3 border-1 surface-border border-round surface-card">
                <div class="text-900 mb-2">
                  <i class="pi pi-tag mr-2"></i>
                  <span class="font-medium">{{ p.produto.nome }}</span>
                </div>
                <div class="text-700">{{p.produto.descricao}}</div>
                <div class="surface-200 mb-1 mt-1 " style="height:2px"></div>
                <div class="text-700 mb-1">Preço de compra: {{ p.preco_compra_atual || 0 | currency:'BRL': '' }}</div>
                <div class="text-700 mb-1">Preço de compra atualizado: {{ p.preco_compra_atualizado | currency:'BRL': '' }}
                </div>
                <div class="surface-200 mb-1 mt-1 " style="height:2px"></div>
                <div class="text-700 mb-1">Preço de venda: {{ p.preco_venda_atual || 0 | currency:'BRL': '' }}</div>
                <div class="text-700 ">Preço de venda atualizado: {{ p.preco_venda_atualizado | currency:'BRL': '' }}
                </div>
                <div class="surface-200 mb-1 mt-1 " style="height:2px"></div>
                <div class="text-primary">Status: {{ p.status }}</div>
                <div *ngIf="p.erro_descricao" class="text-700">Erro: {{ p.erro_descricao }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </li>
    </ul>
  </div>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>
  </ion-toolbar>
</ion-footer>